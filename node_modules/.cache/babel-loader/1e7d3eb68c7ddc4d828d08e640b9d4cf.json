{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useLocation,useNavigate,Link}from'react-router-dom';import{Button,Row,Col,ListGroup,Card,Image}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{saveShippingAddress}from'../actions/cartActions';import Message from'../components/Message';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlaceOrderScreen(){var params=useParams();var location=useLocation();var navigate=useNavigate();var dispatch=useDispatch();var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,error=orderCreate.error,success=orderCreate.success;var cart=useSelector(function(state){return state.cart;});cart.itemsPrice=cart.cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0).toFixed(2);cart.shippingPrice=(cart.itemsPrice>100?0:10).toFixed(2);cart.taxPrice=(0.082*cart.itemsPrice).toFixed(2);cart.totalPrice=(Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice)).toFixed(2);if(!cart.paymentMethod){navigate('/payment/');}useEffect(function(){if(success!==undefined){navigate(\"/order/\".concat(order._id,\"/\"));dispatch({type:ORDER_CREATE_RESET});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[success,navigate,dispatch]);var placeOrder=function placeOrder(){dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping:\"}),cart.shippingAddress.address,\", \",cart.shippingAddress.city,' ',cart.shippingAddress.postalCode,\",\",' ',cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),cart.paymentMethod]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),cart.cartItems.length===0?/*#__PURE__*/_jsx(Message,{variant:\"info\",children:\"Your cart is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cart.cartItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" X $\",item.price,\" = $\",(item.qty*item.price).toFixed(2)]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Item:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.itemsPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.shippingPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.totalPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cart.cartItems===0,onClick:placeOrder,children:\"Place Order\"})})]})})})]})]});}export default PlaceOrderScreen;","map":{"version":3,"names":["React","useState","useEffect","useParams","useLocation","useNavigate","Link","Button","Row","Col","ListGroup","Card","Image","useDispatch","useSelector","saveShippingAddress","Message","CheckoutSteps","createOrder","ORDER_CREATE_RESET","PlaceOrderScreen","params","location","navigate","dispatch","orderCreate","state","order","error","success","cart","itemsPrice","cartItems","reduce","acc","item","price","qty","toFixed","shippingPrice","taxPrice","totalPrice","Number","paymentMethod","undefined","_id","type","placeOrder","orderItems","shippingAddress","address","city","postalCode","country","length","map","index","image","name","product"],"sources":["/Users/akabigdaddy/Desktop/Users/projects/djangoEcommerce/backend/frontend/src/screens/PlaceOrderScreen.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { useParams, useLocation, useNavigate, Link } from 'react-router-dom'\nimport { Button, Row, Col, ListGroup, Card, Image } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { saveShippingAddress } from '../actions/cartActions'\nimport Message from '../components/Message'\nimport CheckoutSteps from '../components/CheckoutSteps'\nimport { createOrder } from '../actions/orderActions'\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants'\n\nfunction PlaceOrderScreen() {\n    const params = useParams()\n    const location = useLocation()\n    const navigate = useNavigate()\n    const dispatch = useDispatch()\n\n    const orderCreate = useSelector(state => state.orderCreate)\n    const {order, error, success} = orderCreate\n\n    const cart = useSelector(state => state.cart)\n\n    cart.itemsPrice = cart.cartItems.reduce((acc, item) => acc + item.price * item.qty, 0).toFixed(2)\n    cart.shippingPrice = (cart.itemsPrice > 100 ? 0 : 10).toFixed(2)\n    cart.taxPrice = ((0.082) * cart.itemsPrice).toFixed(2)\n    cart.totalPrice = (Number(cart.itemsPrice) + Number(cart.shippingPrice) + Number(cart.taxPrice)).toFixed(2)\n\n    if(!cart.paymentMethod){\n        navigate('/payment/')\n    }\n\n    useEffect(() => {\n        if(success !== undefined){\n            navigate(`/order/${order._id}/`)\n            dispatch({type: ORDER_CREATE_RESET})\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [success, navigate, dispatch])\n\n\n    const placeOrder = () => {\n        dispatch(createOrder({\n            orderItems:cart.cartItems,\n            shippingAddress:cart.shippingAddress,\n            paymentMethod:cart.paymentMethod,\n            itemsPrice:cart.itemsPrice,\n            shippingPrice:cart.shippingPrice,\n            taxPrice:cart.taxPrice,\n            totalPrice:cart.totalPrice,\n        }))\n    }\n\n\n  return (\n    <div>\n        <CheckoutSteps step1 step2 step3 step4/>\n        <Row>\n            <Col md={8}>\n                <ListGroup variant='flush'>\n                    <ListGroup.Item>\n                        <h2>Shipping</h2>\n\n                        <p>\n                            <strong>Shipping:</strong>\n                            {cart.shippingAddress.address}, {cart.shippingAddress.city}\n                            {' '}\n                            {cart.shippingAddress.postalCode},\n                            {' '}\n                            {cart.shippingAddress.country}\n                        </p>\n                    </ListGroup.Item>\n\n                    <ListGroup.Item>\n                        <h2>Payment Method</h2>\n\n                        <p>\n                            <strong>Method:</strong>\n                            {cart.paymentMethod}\n                        </p>\n                    </ListGroup.Item>\n\n                    <ListGroup.Item>\n                        <h2>Order Items</h2>\n                            {cart.cartItems.length === 0 ? <Message variant='info'>\n                                Your cart is empty\n                            </Message> : (\n                                <ListGroup variant='flush'>\n                                    {cart.cartItems.map((item,index) => (\n                                        <ListGroup.Item key={index}>\n                                            <Row>\n                                                <Col md={2}>\n                                                    <Image src={item.image} alt={item.name} fluid rounded/>\n                                                </Col>\n\n                                                <Col>\n                                                    <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                                </Col>\n\n                                                <Col md={4}>\n                                                    {item.qty} X ${item.price} = ${(item.qty * item.price).toFixed(2)} \n                                                </Col>\n                                            </Row>\n                                        </ListGroup.Item>\n                                    ))}\n                                </ListGroup>\n                            )}\n                        \n                    </ListGroup.Item>\n                </ListGroup>\n            </Col>\n\n            <Col md={4}>\n                <Card>\n                    <ListGroup variant='flush'>\n                        <ListGroup.Item>\n                            <h2>Order Summary</h2>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>Item:</Col>\n                                <Col>${cart.itemsPrice}</Col>\n                            </Row>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>Shipping:</Col>\n                                <Col>${cart.shippingPrice}</Col>\n                            </Row>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>Tax:</Col>\n                                <Col>${cart.taxPrice}</Col>\n                            </Row>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <Row>\n                                <Col>Total:</Col>\n                                <Col>${cart.totalPrice}</Col>\n                            </Row>\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            {error && <Message variant='danger'>{error}</Message>}\n                        </ListGroup.Item>\n\n                        <ListGroup.Item>\n                            <Button\n                                type='button'\n                                className='btn-block'\n                                disabled={cart.cartItems === 0}\n                                onClick={placeOrder}\n                            >\n                                Place Order\n                            </Button>\n                        </ListGroup.Item>\n                    </ListGroup>\n                </Card>\n            </Col>\n        </Row>\n    </div>\n  )\n}\n\nexport default PlaceOrderScreen"],"mappings":"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"},"metadata":{},"sourceType":"module"}